^D2kBuilding:
	Inherits@1: ^BaseBuilding
	Inherits@selection: ^SelectableBuilding
	Tooltip:
		GenericName: Structure
	OwnerLostAction:
		Action: Kill
	Building:
		BuildSounds: BUILD1.WAV
		ConcretePrerequisites: global-auto-concrete
	ActorPreviewPlaceBuildingPreview:
		RequiresPrerequisites: !global-auto-concrete
		OverridePalette: placebuilding
	CaptureManager:
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building
	SoundOnDamageTransition:
		DamagedSounds: EXPLSML1.WAV
		DestroyedSounds: EXPLHG1.WAV
	Explodes:
		Type: Footprint
		Weapon: BuildingExplode
		EmptyWeapon: BuildingExplode
	RepairableBuilding:
		RepairStep: 500
		PlayerExperience: 25
		RepairingNotification: Repairing
	SpawnActorsOnSell:
		ActorTypes: light_inf
	MustBeDestroyed:
		RequiredForShortGame: true
	ActorLostNotification:
		Notification: BuildingLost
	ShakeOnDeath:
	Demolishable:
		Condition: being-demolished
	Sellable:
		RequiresCondition: !build-incomplete && !being-demolished
		SellSounds: BUILD1.WAV
	CommandBarBlacklist:
	WithBuildingRepairDecoration:
		Image: allyrepair
		Sequence: repair
		Position: Center
		Palette: player
		IsPlayerPalette: True
        
^D2kUpgradeable:
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Condition: stardecoration
	WithDecoration@upgraded:
		RequiresCondition: stardecoration
		Position: TopRight
		Margin: 6, 8
		RequiresSelection: true
		Image: d2k_pips
		Sequence: tag-upgraded

^D2KPaletteRender:
	RenderSprites:
		PlayerPalette: playerd2k
        Scale: 0.75     
	WithDeathAnimation:
		DeathSequencePalette: playerd2k
 
^D2KPaletteRenderInfantry: 
    Inherits: ^D2KPaletteRender       
	Crushable:
		CrushSound: igensqua.wav

^D2KPaletteRenderBuilding:
    Inherits: ^D2KPaletteRender
    ActorPreviewPlaceBuildingPreview:
        OverridePalette: playerd2k

^D2KDisableOnLowPowerOrPowerDown:
	Inherits: ^D2KDisableOnLowPower
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown
		Condition: disabled
	ToggleConditionOnOrder:
		DisabledSound: EnablePower
		EnabledSound: DisablePower
		Condition: powerdown
		OrderName: PowerDown
	WithDecoration@POWERDOWN:
		Image: poweroff
		Sequence: offline
		Palette: chrome
		RequiresCondition: powerdown
		Position: Center
		Offsets:
			repairing: 10, 0
	PowerMultiplier@POWERDOWN:
		RequiresCondition: powerdown
		Modifier: 0
	RepairableBuilding:
		RepairCondition: repairing
	WithBuildingRepairDecoration:
		Offsets:
			powerdown: -10, 0
    
^D2KDisableOnLowPower:
	WithColoredOverlay@IDISABLE:
		RequiresCondition: disabled
		Color: 000000B4
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower
		Condition: disabled
        
        
^D2KVehicle:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^SpriteActor
	Inherits@selection: ^SelectableCombatUnit
	Tooltip:
		GenericName: Unit
	Huntable:
	OwnerLostAction:
		Action: Kill
	Mobile:
		TurnSpeed: 5
		Locomotor: vehicle
		PauseOnCondition: notmobile
	SelectionDecorations:
	WithSpriteControlGroupDecoration:
	Selectable:
		Bounds: 32,32
	Targetable:
		TargetTypes: Ground, Vehicle, C4
	Passenger:
		CargoType: Vehicle
	AttackMove:
	DrawLineToTarget:
	HiddenUnderFog:
	ActorLostNotification:
	Repairable:
		RepairActors: repair_pad
	Guard:
		Voice: Guard
	Guardable:
	WithFacingSpriteBody:
	Demolishable:
	TemporaryOwnerManager:
	MustBeDestroyed:
	Voiced:
		VoiceSet: D2kVehicleVoice
	AutoCarryable:
		CarriedCondition: notmobile
		ReservedCondition: carryall-reserved
		LockedCondition: notmobile
	WithDecoration@CARRYALL:
		Image: d2k_pips
		Sequence: pickup-indicator
		ReferencePoint: Top, Left
		ZOffset: 256
		RequiresCondition: carryall-reserved
	RevealOnFire:
	RevealOnDeath:
		Duration: 100
		Radius: 2c512
	HitShape:
	MapEditorData:
		Categories: Vehicle

^D2KTank:
	Inherits: ^D2KVehicle
	Mobile:
		Locomotor: tracked
       
###########################################
#   BUILDINGS
###########################################
^concrete:
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding
	AlwaysVisible:
	Interactable:
	Building:
		TerrainTypes: Rock
		BuildSounds: CHUNG.WAV
		AllowInvalidPlacement: true
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 4
	Tooltip:
		Name: Concrete
		GenericName: Structure
	RenderSprites:
	KillsSelf:
		RemoveInstead: true
	Buildable:
		Queue: Building.d2k
		BuildPaletteOrder: 10
		Description: Provides a strong foundation that prevents\ndamage from the terrain.
        IconPalette: d2kunit

concretea:
	Inherits: ^concrete
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Tooltip:
		Name: Concrete Slab
	Valued:
		Cost: 20
	Buildable:
		BuildPaletteOrder: 110
		BuildDuration: 62
		BuildDurationModifier: 100
        
concreteb:
	Inherits: ^concrete
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Tooltip:
		Name: Large Concrete Slab
	Valued:
		Cost: 50
	Buildable:
		BuildPaletteOrder: 210
		Prerequisites: upgrade.conyard
		BuildDuration: 94
		BuildDurationModifier: 100

construction_yard:
	Inherits@D2kBLD: ^D2kBuilding
	Inherits@BB: ^BaseBuilding
    Inherits@shape: ^3x3Shape
	Inherits@UPGRADEABLE: ^D2kUpgradeable
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding
	Buildable:
		Description: Produces structures.
	Building:
		Footprint: xxx xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
        IconPalette: d2kunit
	Selectable:
		Bounds: 72,48
	Health:
		HP: 150000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 5c768
	Production:
		Produces: Building.d2k, Defence.d2k, Upgrade.d2k
	Valued:
		Cost: 2500
	Tooltip:
		Name: Construction Yard
	CustomSellValue:
		Value: 2000
	SpawnActorsOnSell:
		ActorTypes: light_inf, light_inf, engineer
	BaseBuilding:   
	ProductionBar:
		ProductionType: Building.d2k
	ProductionBar@2:
		ProductionType: Upgrade.d2k        
	ProductionBar@3:
		ProductionType: Defence.d2k               
	Power:
		Amount: 20
	RenderSprites:
		Image: conyard.ordos
		FactionImages:
			atreides: conyard.atreides
			fremen: conyard.atreides
			harkonnen: conyard.harkonnen
			corrino: conyard.harkonnen
	WithBuildingPlacedOverlay:
		RequiresCondition: !build-incomplete
		Palette: d2kunit
	ProductionQueue:
		Type: Building.d2k
        Group: Building
        ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
    ProductionQueue@2:
        Type: Upgrade.d2k
        Group: Addon
 	ProductionQueue@3:
		Type: Defence.d2k
        Group: Defence     
        ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled        
	ProvidesPrerequisite@buildingname:
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Prerequisites: upgrade.conyard
	RevealOnDeath:
		Radius: 5c768
    BaseProvider:
		Range: 14c0
    GivesBuildableArea:
		AreaTypes: building     
        
wind_trap:
	Inherits: ^D2kBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding
	Buildable:
		Queue: Building.d2k
		BuildPaletteOrder: 120
		BuildDuration: 208
		BuildDurationModifier: 100
		Description: Provides power for other structures.
        IconPalette: d2kunit      
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 300
	Tooltip:
		Name: Wind Trap
	Building:
		Footprint: xx xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 50000
	HitShape:
		Type: Rectangle
			TopLeft: -1024, -1024
			BottomRight: 1024, 1024
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 3c768
	RenderSprites:
		Image: power.ordos
		FactionImages:
			atreides: power.atreides
			fremen: power.atreides
			harkonnen: power.harkonnen
			corrino: power.harkonnen
	WithIdleOverlay@ZAPS:
		RequiresCondition: !build-incomplete
		Sequence: idle-zaps
	Power:
		Amount: 200
	ScalePowerWithHealth:
	ProvidesPrerequisite@buildingname:
	RevealOnDeath:
		Radius: 3c768

d2k_barracks:
	Inherits: ^D2kBuilding
	Inherits@UPGRADEABLE: ^D2kUpgradeable
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding
	Buildable:
		Prerequisites: wind_trap
		Queue: Building.d2k
		BuildPaletteOrder: 220
		BuildDuration: 268
		BuildDurationModifier: 100
		Description: Trains infantry.
        IconPalette: d2kunit      
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 500
	Tooltip:
		Name: Barracks
	Building:
		Footprint: xx xx ==
		Dimensions: 2,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 50000
	HitShape:
		Type: Rectangle
			TopLeft: -1024, -1024
			BottomRight: 1024, 1024
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 3c768
	RallyPoint:
	Exit@1:
		SpawnOffset: 352,576,0
		ExitCell: 0,2
	Exit@2:
		SpawnOffset: 512,480,0
		ExitCell: 1,2
	Production:
		Produces: Infantry.d2k, Upgrade.d2k
	ProductionQueue:
		Type: Infantry.d2k
        Group: Infantry
    	ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled    
    ProductionQueue@2:
        Type: Upgrade.d2k
        Group: Addon      
	ProductionBar:
		ProductionType: Infantry.d2k
	ProvidesPrerequisite@atreides:
		Prerequisite: barracks.atreides
		Factions: atreides
	ProvidesPrerequisite@ordos:
		Prerequisite: barracks.ordos
		Factions: ordos
	ProvidesPrerequisite@harkonnen:
		Prerequisite: barracks.harkonnen
		Factions: harkonnen
	Power:
		Amount: -30
	RenderSprites:
		Image: barracks.ordos
		FactionImages:
			atreides: barracks.atreides
			fremen: barracks.atreides
			harkonnen: barracks.harkonnen
			corrino: barracks.harkonnen
	ProvidesPrerequisite@buildingname:
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Prerequisites: upgrade.barracks
	RevealOnDeath:
		Radius: 3c768

refinery:
	Inherits: ^BaseBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding    
    Inherits@ref: ^Refinery
	Buildable:
		Prerequisites: wind_trap
		Queue: Building.d2k
		BuildPaletteOrder: 130
		BuildDuration: 625
		BuildDurationModifier: 100
		Description: Harvesters unload Spice here for processing.
        IconPalette: d2kunit   
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 1500
	Tooltip:
		Name: Spice Refinery
	Building:
		Footprint: =xx xx= ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 80000
	HitShape:
		Type: Rectangle
			TopLeft: -512, -1024
			BottomRight: 1536, 0
	HitShape@BOTTOM:
		Type: Rectangle
			TopLeft: -1536, 0
			BottomRight: 512, 1024
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 3c768
	Refinery:
		DockAngle: 160
		DockOffset: 2,1
		TickRate: 20
	StoresResources:
		Capacity: 2000
        PipCount: 10
	CustomSellValue:
		Value: 1000
	FreeActorWithDelivery:
		Actor: harvester
		DeliveryOffset: 2,2
		DeliveringActor: carryall.reinforce
		Facing: 160
	RenderSprites:
		Image: refinery.ordos
		FactionImages:
			atreides: refinery.atreides
			fremen: refinery.atreides
			harkonnen: refinery.harkonnen
			corrino: refinery.harkonnen
	WithIdleOverlay@TOP:
		RequiresCondition: !build-incomplete
		Sequence: idle-top
	WithDockedOverlay@SMOKE:
		RequiresCondition: !build-incomplete
		Sequence: smoke
	Power:
		Amount: -75
	ProvidesPrerequisite@buildingname:
        
d2k_silo:
	Inherits: ^D2kBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Buildable:
		Prerequisites: refinery
		Queue: Building.d2k
		BuildPaletteOrder: 310
		BuildDuration: 156
		BuildDurationModifier: 100
		Description: Stores excess harvested Spice.
        IconPalette: d2kunit     
	Selectable:
		Bounds: 32, 32
	Valued:
		Cost: 250
	Tooltip:
		Name: Silo
	RequiresBuildableArea:
        AreaTypes: building
		Adjacent: 4
	Health:
		HP: 25000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 2c768
	RenderSprites:
		Image: silo.ordos
		FactionImages:
			atreides: silo.atreides
			fremen: silo.atreides
			harkonnen: silo.harkonnen
			corrino: silo.harkonnen
	-WithSpriteBody:
	WithResourceLevelSpriteBody:
		Sequence: stages
	StoresResources:
		Capacity: 2000
        PipCount: 10
	-SpawnActorsOnSell:
	Power:
		Amount: -15
	MustBeDestroyed:
		RequiredForShortGame: false
	ThrowsShrapnel:
		Weapons: Debris, Debris2, Debris3, Debris4
		Pieces: 3, 5
		Range: 2c0, 5c0
	RevealOnDeath:
		Radius: 2c768

light_factory:
	Inherits: ^D2kBuilding
	Inherits@UPGRADEABLE: ^D2kUpgradeable
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding
	Buildable:
		Prerequisites: refinery
		Queue: Building.d2k
		BuildPaletteOrder: 230
		BuildDuration: 321
		BuildDurationModifier: 100
		Description: Produces light vehicles.
        IconPalette: d2kunit    
	Selectable:
		Bounds: 72, 60
	Valued:
		Cost: 1000
	Tooltip:
		Name: Light Factory
	Building:
		Footprint: xxx xx= ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 50000
	HitShape:
		TargetableOffsets: -210,608,0
		Type: Rectangle
			TopLeft: -1536, -1024
			BottomRight: 1536, 1024
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 5c768
	RenderSprites:
		Image: light.ordos
		FactionImages:
			atreides: light.atreides
			fremen: light.atreides
			harkonnen: light.harkonnen
			corrino: light.harkonnen
	WithIdleOverlay@TOP:
		RequiresCondition: !build-incomplete
		Sequence: idle-top
	WithProductionOverlay@WELDING:
		RequiresCondition: !build-incomplete
		Queues: Vehicle
		Sequence: production-welding
	RallyPoint:
	Exit@1:
		SpawnOffset: 544,-224,0
		ExitCell: 2,1
	Production:
		Produces: Vehicle.d2k, Upgrade.d2k
	ProductionQueue:
		Type: Vehicle.d2k
        Group: Vehicle
        ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
    ProductionQueue@2:
        Type: Upgrade.d2k
        Group: Addon
	ProductionBar:
		ProductionType: Vehicle.d2k
	ProvidesPrerequisite@atreides:
		Prerequisite: light.atreides
		Factions: atreides
	ProvidesPrerequisite@ordos:
		Prerequisite: light.ordos
		Factions: ordos
	ProvidesPrerequisite@harkonnen:
		Prerequisite: light.harkonnen
		Factions: harkonnen
	ProvidesPrerequisite@trike:
		Prerequisite: light.trike
		Factions: atreides, fremen, harkonnen, corrino
	ProvidesPrerequisite@raider:
		Prerequisite: light.raider
		Factions: ordos, smuggler, mercenary
	ProvidesPrerequisite@buildingname:
	Power:
		Amount: -125
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Prerequisites: upgrade.light

heavy_factory:
	Inherits: ^D2kBuilding
	Inherits@UPGRADEABLE: ^D2kUpgradeable
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding    
	Buildable:
		Prerequisites: refinery
		Queue: Building.d2k
		BuildPaletteOrder: 330
		BuildDuration: 750
		BuildDurationModifier: 100
		Description: Produces heavy vehicles.
        IconPalette: d2kunit     
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 2000
	Tooltip:
		Name: Heavy Factory
	Building:
		Footprint: _x_ xxx =xX ===
		Dimensions: 3,4
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 80000
	HitShape:
		TargetableOffsets: -1155,-704,0, -1365,832,0
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 1536
	HitShape@TOP:
		Type: Rectangle
			TopLeft: -512, -1536
			BottomRight: 512, -512
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c768
	RallyPoint:
	Exit@1:
		SpawnOffset: 256,192,0
		ExitCell: 0,2
	Production:
		Produces: Armor.d2k, Upgrade.d2k
	ProductionQueue:
		Type: Armor.d2k
        Group: Vehicle
    	ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled    
    ProductionQueue@2:
        Type: Upgrade.d2k
        Group: Addon      
	ProductionBar:
		ProductionType: Armor.d2k
	ProvidesPrerequisite@atreides:
		Prerequisite: heavy.atreides
		Factions: atreides
	ProvidesPrerequisite@ordos:
		Prerequisite: heavy.ordos
		Factions: ordos
	ProvidesPrerequisite@harkonnen:
		Prerequisite: heavy.harkonnen
		Factions: harkonnen
	ProvidesPrerequisite@atreides_combat:
		Prerequisite: heavy.atreides_combat
		Factions: atreides, fremen
	ProvidesPrerequisite@ordos_combat:
		Prerequisite: heavy.ordos_combat
		Factions: ordos, smuggler, mercenary
	ProvidesPrerequisite@harkonnen_combat:
		Prerequisite: heavy.harkonnen_combat
		Factions: harkonnen, corrino
	ProvidesPrerequisite@missile_tank:
		Prerequisite: heavy.missile_tank
		Factions: atreides, fremen, harkonnen, corrino
	RenderSprites:
		Image: heavy.ordos
		FactionImages:
			atreides: heavy.atreides
			fremen: heavy.atreides
			harkonnen: heavy.harkonnen
			corrino: heavy.harkonnen
			mercenary: heavy.mercenary

	WithIdleOverlay@TOP:
		RequiresCondition: !build-incomplete
		Sequence: idle-top
	WithProductionOverlay@WELDING:
		RequiresCondition: !build-incomplete
		Queues: Armor
		Sequence: production-welding
	Power:
		Amount: -150
	ProvidesPrerequisite@buildingname:
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Prerequisites: upgrade.heavy

outpost:
	Inherits: ^D2kBuilding
	Inherits@IDISABLE: ^D2KDisableOnLowPowerOrPowerDown
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Buildable:
		Prerequisites: d2k_barracks, ~techlevel.medium
		Queue: Building.d2k
		BuildPaletteOrder: 320
		BuildDuration: 312
		BuildDurationModifier: 100
		Description: Provides a radar map of the battlefield.\n  Requires power to operate.
        IconPalette: d2kunit
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 1500
	Tooltip:
		Name: Outpost
	Building:
		Footprint: xxx xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 60000
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -1024
			BottomRight: 1536, 1024
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 5c768
	ProvidesRadar:
		RequiresCondition: !disabled && !jammed
	RenderSprites:
		Image: outpost.ordos
		FactionImages:
			atreides: outpost.atreides
			fremen: outpost.atreides
			harkonnen: outpost.harkonnen
			corrino: outpost.harkonnen
	WithIdleOverlay@DISH:
		RequiresCondition: !build-incomplete && !severe-damaged
		Sequence: idle-dish
		PauseOnCondition: disabled
	GrantConditionOnDamageState@STOPDISH:
		Condition: severe-damaged
	Power:
		Amount: -125
	ProvidesPrerequisite@buildingname:

starport:
	Inherits: ^D2kBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Tooltip:
		Name: Starport
	Buildable:
		Prerequisites: heavy_factory, outpost, ~techlevel.high
		Queue: Building.d2k
		BuildPaletteOrder: 530
		BuildDuration: 625
		BuildDurationModifier: 100
		Description: Dropzone for quick reinforcements, at a price.
        IconPalette: d2kunit     
	Valued:
		Cost: 3000
	Building:
		Footprint: xxx x=x =x=
		Dimensions: 3,3
	Selectable:
		Bounds: 72, 72
	Health:
		HP: 70000
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -1536
			BottomRight: 1536, 512
	HitShape@BOTTOM:
		Type: Rectangle
			TopLeft: -512, 512
			BottomRight: 512, 1536
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 3c768
	RallyPoint:
	Exit@1:
		SpawnOffset: 0,-480,0
		ExitCell: 2,2
	Exit@2:
		SpawnOffset: 0,-480,0
		ExitCell: 0,2
 	#WithDeliveryOverlay:
	#	RequiresCondition: !build-incomplete
	#	Palette: starportlights      
	ProductionAirdrop:
		Produces: Starport
		ActorType: frigate
	RenderSprites:
		Image: starport.ordos
		FactionImages:
			atreides: starport.atreides
			fremen: starport.atreides
			harkonnen: starport.harkonnen
			corrino: starport.harkonnen
			smuggler: starport.smuggler
	ProductionBar:
		ProductionType: Starport.d2k
	ProductionQueue:
		Type: Starport.d2k
        Group: Vehicle
	ProvidesPrerequisite@atreides:
		Prerequisite: starport.atreides
		Factions: atreides
	ProvidesPrerequisite@ordos:
		Prerequisite: starport.ordos
		Factions: ordos
	ProvidesPrerequisite@harkonnen:
		Prerequisite: starport.harkonnen
		Factions: harkonnen
	ProvidesPrerequisite@atreides_combat:
		Prerequisite: starport.atreides_combat
		Factions: atreides, fremen
	ProvidesPrerequisite@ordos_combat:
		Prerequisite: starport.ordos_combat
		Factions: ordos, smuggler, mercenary
	ProvidesPrerequisite@harkonnen_combat:
		Prerequisite: starport.harkonnen_combat
		Factions: harkonnen, corrino
	Power:
		Amount: -150
	ProvidesPrerequisite@buildingname:

wall:
	Inherits@1: ^SpriteActor
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Interactable:
	CombatDebugOverlay:
	FrozenUnderFog:
	ScriptTriggers:
	OwnerLostAction:
		Action: ChangeOwner
	Buildable:
		Queue: Building.d2k
		Prerequisites: barracks
		BuildPaletteOrder: 410
		BuildDuration: 62
		BuildDurationModifier: 100
		Description: Stop units and blocks enemy fire.
        IconPalette: d2kunit        
	Valued:
		Cost: 50
	CustomSellValue:
		Value: 0
	UpdatesPlayerStatistics:
		AddToAssetsValue: false
	Tooltip:
		Name: Concrete Wall
		GenericName: Structure
	AppearsOnRadar:
	Building:
		BuildSounds: CHUNG.WAV
		TerrainTypes: Rock, Concrete
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 7
	Health:
		HP: 10000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 1c768
	Crushable:
		CrushClasses: wall
	BlocksProjectiles:
		Height: 512
	LineBuild:
		Range: 5
		NodeTypes: wall, turret
	LineBuildNode:
		Types: wall
	Targetable:
		TargetTypes: Ground, Wall
	WithWallSpriteBody:
	Sellable:
		SellSounds: CHUNG.WAV
	Guardable:
	Explodes:
		Weapon: WallExplode
		EmptyWeapon: WallExplode
	ThrowsShrapnel:
		Weapons: Debris2, Debris3
		Pieces: 1, 1
		Range: 1c512, 2c768
	HitShape:
		Type: Rectangle
			TopLeft: -512, -512
			BottomRight: 512, 512
	AppearsOnMapPreview:
	MapEditorData:
		Categories: Defense
	Replaceable:
		Types: Tower

medium_gun_turret:
	Inherits: ^Defense
	Inherits@AUTOTARGET: ^AutoTargetGround
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Buildable:
		Queue: Defence.d2k
		Prerequisites: barracks
		BuildPaletteOrder: 510
		BuildDuration: 268
		BuildDurationModifier: 100
		Description: Defensive structure.\n  Strong vs Tanks\n  Weak vs Infantry, Aircraft
        IconPalette: d2kunit      
	Valued:
		Cost: 1100
	Tooltip:
		Name: Gun Turret
	RequiresBuildableArea:
		Adjacent: 4
	Selectable:
		Bounds: 32, 32
		DecorationBounds: 32, 32, 0, 0
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c768
	BodyOrientation:
		QuantizedFacings: 32
	WithMuzzleOverlay:
	Turreted:
		TurnSpeed: 24
		InitialFacing: 512
		RealignDelay: -1
	Armament:
		Weapon: 110mm_Gun
		LocalOffset: 512,0,432
		MuzzleSequence: muzzle
	Power:
		Amount: -50
	Replacement:
		ReplaceableTypes: Tower
    WithWallSpriteBody:
    WithSpriteTurret:
	AttackTurreted:
		RequiresCondition: !build-incomplete
	DetectCloaked:
		Range: 4c0

large_gun_turret:
	Inherits: ^Defense
	Inherits@IDISABLE: ^D2KDisableOnLowPowerOrPowerDown
	Inherits@AUTOTARGET: ^AutoTargetGround
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	AttackTurreted:
		PauseOnCondition: disabled
	Buildable:
		Queue: Defence.d2k
		Prerequisites: outpost, upgrade.conyard, ~techlevel.medium
		BuildPaletteOrder: 610
		BuildDuration: 312
		BuildDurationModifier: 100
		Description: Defensive structure.\n  Strong vs Infantry, Aircraft\n  Weak vs Tanks\n\n  Requires power to operate.
        IconPalette: d2kunit       
	Valued:
		Cost: 1500
	Tooltip:
		Name: Rocket Turret
	RequiresBuildableArea:
		Adjacent: 4
	Selectable:
		Bounds: 32, 32
		DecorationBounds: 32, 32, 0, 0
	Health:
		HP: 60000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 5c768
	BodyOrientation:
		QuantizedFacings: 32
	Armament:
		Weapon: D2K_TowerMissile
		LocalOffset: 256,384,768, 256,-384,768
	Turreted:
		TurnSpeed: 32
		InitialFacing: 512
		RealignDelay: -1
	Power:
		Amount: -60
    WithWallSpriteBody:
    WithSpriteTurret:        
	RevealOnDeath:
		Radius: 5c768
	Replacement:
		ReplaceableTypes: Tower
	AttackTurreted:
		RequiresCondition: !build-incomplete
	DetectCloaked:
		Range: 6c0
        
repair_pad:
	Inherits: ^D2kBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding    
	Buildable:
		Queue: Building.d2k
		Prerequisites: heavy_factory, upgrade.heavy, ~techlevel.medium
		BuildPaletteOrder: 430
		BuildDuration: 375
		BuildDurationModifier: 100
		Description: Repairs vehicles.\n Allows construction of MCVs
        IconPalette: d2kunit       
	Valued:
		Cost: 1500
	Tooltip:
		Name: Repair Pad
	Building:
		Footprint: +++ +++ +++
		Dimensions: 3,3
	Health:
		HP: 50000
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 512
	HitShape@TOPANDBOTTOM:
		Type: Rectangle
			TopLeft: -512, -1536
			BottomRight: 512, 1536
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 3c768
	Selectable:
		Bounds: 72, 72
	Reservable:
	RepairsUnits:
		Interval: 10
		HpPerStep: 800
		StartRepairingNotification: Repairing
		FinishRepairingNotification: UnitRepaired
		PlayerExperience: 15
	RallyPoint:
	RenderSprites:
		Image: repair_pad.ordos
		FactionImages:
			atreides: repair_pad.atreides
			fremen: repair_pad.atreides
			harkonnen: repair_pad.harkonnen
			corrino: repair_pad.harkonnen
	WithRepairOverlay:
		RequiresCondition: !build-incomplete
		Palette: effect75alpha
	Power:
		Amount: -50
	ProvidesPrerequisite@buildingname:

high_tech_factory:
	Inherits: ^D2kBuilding
	Inherits@UPGRADEABLE: ^D2kUpgradeable
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding    
	Buildable:
		Prerequisites: outpost, ~techlevel.medium
		Queue: Building.d2k
		BuildPaletteOrder: 420
		BuildDuration: 468
		BuildDurationModifier: 100
		Description: Unlocks advanced technology.
        IconPalette: d2kunit      
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 2500
	Tooltip:
		Name: High Tech Factory
	ProductionFromMapEdge:
		Produces: Aircraft, Upgrade
	ProductionBar:
		ProductionType: Aircraft.d2k
	ProductionQueue:
		Type: Aircraft.d2k
        Group: Aircraft
	Exit:
		SpawnOffset: 0,0,728
		ExitCell: 0,0
	Building:
		Footprint: _X_ xxx XXX ===
		Dimensions: 3,4
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 60000
	HitShape:
		TargetableOffsets: -1312,0,0, -1312,-1024,0, -1312,1024,0
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 1536
	HitShape@TOP:
		TargetableOffsets: 1280,0,0
		Type: Rectangle
			TopLeft: -512, -1536
			BottomRight: 512, -512
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c768
	RenderSprites:
		Image: hightech.ordos
		FactionImages:
			atreides: hightech.atreides
			fremen: hightech.atreides
			harkonnen: hightech.harkonnen
			corrino: hightech.harkonnen
	WithProductionOverlay@WELDING:
		RequiresCondition: !build-incomplete
		Queues: Aircraft
		Sequence: production-welding
	ProvidesPrerequisite@upgrade:
		Prerequisite: hightech.atreides
		Factions: atreides
	ProvidesPrerequisite@buildingname:	
    ClassicAirstrikePower@orni:
		Squad:
			ornithopter:
				SpawnOffset: 0,0,0
				TargetOffset: 0,0,0
            ornithopter:
				SpawnOffset: -768,512,0
				TargetOffset: -384,128,0    
            ornithopter:
				SpawnOffset: -1536,1024,0
				TargetOffset: -768,256,0        
		Icon: ornistrike
        IconPalette: d2kunit         
		ChargeInterval: 7500
		Description: Air Strike
		LongDesc: Ornithopters hit the target with bombs
		SelectTargetSpeechNotification: SelectTarget
		InsufficientPowerSpeechNotification: InsufficientPower
		IncomingSpeechNotification: EnemyPlanesApproaching
		QuantizedFacings: 8
		DisplayBeacon: True
        AllowMultiple: False
		BeaconPoster: airstrike
		BeaconPosterPalette: beaconposter
		DisplayRadarPing: True
		CameraActor: camera
		CameraRemoveDelay: 150
		ArrowSequence: arrow
		ClockSequence: clock
		CircleSequence: circles
		UseDirectionalTarget: True
		DirectionArrowAnimation: airstrikedirection
		Strikes: 3
		CircleDelay: 40
		OrderName: ornistrike
		SupportPowerPaletteOrder: 20
		Prerequisites: ~techlevel.superweapons, upgrade.hightech
	Power:
		Amount: -75
	GrantConditionOnPrerequisite@UPGRADEABLE:
		Prerequisites: upgrade.hightech

research_centre:
	Inherits: ^D2kBuilding
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding   
	Buildable:
		Queue: Building.d2k
		Prerequisites: outpost, heavy_factory, upgrade.heavy, ~techlevel.high
		BuildPaletteOrder: 520
		BuildDuration: 312
		BuildDurationModifier: 100
		Description: Unlocks advanced tanks.
        IconPalette: d2kunit     
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 2000
	Tooltip:
		Name: IX Research Center
	Building:
		Footprint: _X_ xxx XXX ===
		Dimensions: 3,4
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 50000
	HitShape:
		TargetableOffsets: -1574,-158,0, -1050,-1024,0, -1155,960,0
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 1536
	HitShape@TOP:
		TargetableOffsets: 1312,0,0
		Type: Rectangle
			TopLeft: -512, -1536
			BottomRight: 512, -512
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c768
	RenderSprites:
		Image: research.ordos
		FactionImages:
			atreides: research.atreides
			fremen: research.atreides
			harkonnen: research.harkonnen
			corrino: research.harkonnen

	WithIdleOverlay@LIGHTS:
		RequiresCondition: !build-incomplete
		Sequence: idle-lights
	Power:
		Amount: -175
	ProvidesPrerequisite@buildingname:

palace:
	Inherits: ^D2kBuilding
	Inherits@IDISABLE: ^D2KDisableOnLowPowerOrPowerDown
    Inherits@D2KSprite: ^D2KPaletteRenderBuilding    
	Buildable:
		Prerequisites: research_centre, ~techlevel.high
		Queue: Building.d2k
		BuildPaletteOrder: 620
		BuildDuration: 937
		BuildDurationModifier: 100
		Description: Unlocks elite infantry and weapons.
        IconPalette: d2kunit       
	Selectable:
		Bounds: 72, 72
	Valued:
		Cost: 3500
	Tooltip:
		Name: Palace
	Building:
		Footprint: xx= xxx =xx
		Dimensions: 3,3
	Health:
		HP: 80000
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -512
			BottomRight: 1536, 512
	HitShape@TOP:
		Type: Rectangle
			TopLeft: -1536, -1536
			BottomRight: 512, -512
	HitShape@BOTTOM:
		Type: Rectangle
			TopLeft: -512, 512
			BottomRight: 1536, 1536
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c768
	RenderSprites:
		Image: palace.ordos
		FactionImages:
			atreides: palace.atreides
			fremen: palace.atreides
			harkonnen: palace.harkonnen
			corrino: palace.corrino
	WithNukeLaunchOverlay:
		RequiresCondition: !build-incomplete && !launchpad-damaged && harkonnen
	GrantConditionOnDamageState@LAUNCHPADDAMAGED:
		Condition: launchpad-damaged
	Power:
		Amount: -200
	ProvidesPrerequisite@nuke:
		Prerequisite: palace.nuke
		Factions: harkonnen
	ProvidesPrerequisite@fremen:
		Prerequisite: palace.fremen
		Factions: atreides
	ProvidesPrerequisite@saboteur:
		Prerequisite: palace.saboteur
		Factions: ordos
	ProvidesPrerequisite@sardaukar:
		Prerequisite: palace.sardaukar
		Factions: corrino
	#ProductionQueue:
	#	RequiresCondition: atreides || ordos
	NukePower:
		Cursor: nuke
		Icon: deathhand
        IconPalette: d2kunit   
		PauseOnCondition: disabled
		RequiresCondition: harkonnen
		Prerequisites: ~techlevel.superweapons, ~palace.nuke
		ChargeInterval: 7500
		Description: Death Hand
		LongDesc: Launches an atomic missile at a target location
		BeginChargeSpeechNotification: DeathHandMissilePrepping
		EndChargeSpeechNotification: DeathHandMissileReady
		IncomingSpeechNotification: MissileLaunchDetected
		MissileWeapon: deathhand
		MissileDelay: 18
		SpawnOffset: 32,816,0
		DetonationAltitude: 3c0
		RemoveMissileOnDetonation: False
		DisplayBeacon: True
		DisplayRadarPing: True
		CameraRange: 10c0
		ArrowSequence: arrow
		CircleSequence: circles
		FlightVelocity: 384
		TrailInterval: 0
		TrailImage: large_trail
		TrailSequences: idle
		SupportPowerPaletteOrder: 40
	ProduceActorPower@fremen:
		Description: Recruit Fremen
		LongDesc: Elite infantry unit armed with assault rifles and rockets\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery\n  Special Ability: Invisibility
		Icon: fremen
        IconPalette: d2kunit         
		PauseOnCondition: disabled
		RequiresCondition: atreides
		Prerequisites: ~techlevel.superweapons, ~palace.fremen
		Actors: fremen, fremen
		Type: Fremen
		ChargeInterval: 2250
		ReadyAudio: Reinforce
		BlockedAudio: NoRoom
		OrderName: ProduceActorPower.Fremen
		SupportPowerPaletteOrder: 20
	ProduceActorPower@saboteur:
		Description: Recruit Saboteur
		LongDesc: Sneaky infantry, armed with explosives\n  Strong vs Buildings\n  Weak vs Everything\n  Special Ability: destroy buildings
		Icon: saboteur
        IconPalette: d2kunit      
		PauseOnCondition: disabled
		RequiresCondition: ordos
		Prerequisites: ~techlevel.superweapons, ~palace.saboteur
		Actors: saboteur
		Type: Saboteur
		ChargeInterval: 2250
		ReadyAudio: Reinforce
		BlockedAudio: NoRoom
		OrderName: ProduceActorPower.Saboteur
		SupportPowerPaletteOrder: 30
	Exit@1:
		SpawnOffset: -704,768,0
		ExitCell: -1,2
	Exit@2:
		SpawnOffset: -704,768,0
		ExitCell: -1,3
	Exit@3:
		SpawnOffset: -704,768,0
		ExitCell: 0,3
	Production@Atreides:
		Produces: Fremen
		RequiresCondition: atreides
	Production@Ordos:
		Produces: Saboteur
		RequiresCondition: ordos
	GrantConditionOnFaction@Atreides:
		Condition: atreides
		Factions: atreides, fremen
	GrantConditionOnFaction@Harkonnen:
		Condition: harkonnen
		Factions: harkonnen
	GrantConditionOnFaction@Ordos:
		Condition: ordos
		Factions: ordos, mercenary, smuggler
	SupportPowerChargeBar:
		RequiresCondition: atreides || harkonnen || ordos
	ProvidesPrerequisite@buildingname:

conyard.atreides:
	Inherits: construction_yard
	Buildable:
		Queue: Building.d2k
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		ForceFaction: atreides
	RenderSprites:
		Image: conyard.atreides
		-FactionImages:

conyard.harkonnen:
	Inherits: construction_yard
	Buildable:
		Queue: Building.d2k
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		ForceFaction: harkonnen
	RenderSprites:
		Image: conyard.harkonnen
		-FactionImages:

conyard.ordos:
	Inherits: construction_yard
	Buildable:
		Queue: Building.d2k
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		ForceFaction: ordos
	RenderSprites:
		Image: conyard.ordos
		-FactionImages:

###################################
#     UNITS
###################################

light_inf:
	Inherits: ^Soldier
	Inherits@EXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Inherits@DECORATIONS: ^InfantryExperienceHospitalHazmatOverrides
	Inherits@anim: ^D2KPaletteRenderInfantry
	Valued:
		Cost: 80
	Tooltip:
		Name: Light Infantry
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Buildable:
		BuildPaletteOrder: 10
		Queue: Infantry.d2k
		Description: General-purpose infantry.\n  Strong vs Infantry\n  Weak vs Vehicles
        IconPalette: d2kunit           
	Mobile:
		Speed: 43
	Health:
		HP: 8000
	AutoTarget:
		ScanRadius: 4
	Armament@PRIMARY:							##########
		Weapon: LMG
	Armament@GARRISONED:						##########
		Name: garrisoned
		Weapon: HighV
		MuzzleSequence: garrison-muzzle
	WithInfantryBody:
		IdleSequences: idle1,idle2,idle3,idle4
		DefaultAttackSequence: shoot
	Parachutable:
	Inherits@EXT: ^ExternalConditions					##########
	AcceptsDeliveredExperience:							##########
		ValidTypes: infantry							##########
        
engineer:
	Inherits: ^Soldier
	Inherits@selection: ^SelectableSupportUnit
	Inherits@anim: ^D2KPaletteRenderInfantry    
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 30
		Prerequisites: upgrade.barracks, ~techlevel.medium
		BuildDuration: 108
		BuildDurationModifier: 40
		Description: Infiltrates and captures enemy structures\n  Strong vs Buildings\n  Weak vs Everything
        IconPalette: d2kunit       
	Valued:
		Cost: 350
	Tooltip:
		Name: Engineer
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 4500
	RevealsShroud:
		Range: 2c768
	Mobile:
		Speed: 31
	EngineerRepair:
	CaptureManager:
	Captures:
		CaptureTypes: building
		PlayerExperience: 50
	-RevealOnFire:
	Voiced:
		VoiceSet: EngineerVoice
	-AttackFrontal:

trooper:
	Inherits: ^Soldier
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@anim: ^D2KPaletteRenderInfantry
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 20
		Prerequisites: upgrade.barracks, ~techlevel.medium
		BuildDuration: 73
		BuildDurationModifier: 40
		Description: Anti-tank infantry\n  Strong vs Tanks\n  Weak vs Infantry, Artillery
        IconPalette: d2kunit            
	Valued:
		Cost: 160
	Tooltip:
		Name: Trooper
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 10000
	RevealsShroud:
		Range: 4c768
	Mobile:
		Speed: 31
	Armament:
		Weapon: D2K_Bazooka
		LocalOffset: 128,0,256
	TakeCover:
		ProneOffset: 324,0,-204
	WithInfantryBody:
		DefaultAttackSequence: shoot

thumper:
	Inherits: ^Soldier
 	Inherits@anim: ^D2KPaletteRenderInfantry
	Inherits@EXT: ^ExternalConditions    
	-RevealOnFire:
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 40
		Prerequisites: upgrade.barracks, ~techlevel.high
		BuildDuration: 108
		BuildDurationModifier: 40
		Description: Attracts nearby worms when deployed\n  Unarmed
        IconPalette: d2kunit            
	Valued:
		Cost: 250
	Tooltip:
		Name: Thumper Infantry
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 6000
	RevealsShroud:
		Range: 2c768
	Mobile:
		Speed: 43
		RequiresCondition: undeployed
	GrantConditionOnDeploy:
		DeployedCondition: deployed
		UndeployedCondition: undeployed
		Facing: 128
		AllowedTerrainTypes: Sand, Spice, Dune, SpiceSand
	WithInfantryBody:
		RequiresCondition: undeployed
	WithSpriteBody@DEPLOYED:
		Sequence: thump
		RequiresCondition: !undeployed
	WithMakeAnimation@DEPLOYING:
		Sequence: deploy
	WithIdleOverlay@DEPLOYED:
		Sequence: thump-sand
		RequiresCondition: deployed
	AmbientSound:
		SoundFiles: THUMPER1.WAV
		Interval: 60
		RequiresCondition: deployed
	AttractsWorms:
		Intensity: 1000
		Falloff: 0, 0, 0, 100, 100, 100, 25, 11, 6, 4, 3, 2, 1, 0
		RequiresCondition: deployed
	-AttackFrontal:

fremen:
	Inherits: ^Soldier
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Inherits@anim: ^D2KPaletteRenderInfantry
	Inherits@EXT: ^ExternalConditions    
	Tooltip:
		Name: Fremen
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 80
		Prerequisites: ~disabled
		Description: Elite infantry unit armed with assault rifles and rockets\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery\n  Special Ability: Invisibility
        IconPalette: d2kunit       
	Mobile:
		Speed: 43
	Valued:
		Cost: 200 ## actually 0, but spawns from support power at Palace
	Health:
		HP: 15000
	RevealsShroud:
		Range: 4c768
	AutoTarget:
		ScanRadius: 7
		InitialStance: HoldFire
		InitialStanceAI: ReturnFire
	Armament@PRIMARY:
		Weapon: Fremen_S
	Armament@SECONDARY:
		Weapon: Fremen_L
	WithInfantryBody:
		DefaultAttackSequence: shoot
	Cloak:
		InitialDelay: 85
		CloakDelay: 85
		UncloakOn: Attack, Unload, Infiltrate, Demolish, Dock, Damage, Heal
		IsPlayerPalette: true
		PauseOnCondition: cloak-force-disabled
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	-MustBeDestroyed:
	Voiced:
		VoiceSet: D2KFremenVoice

grenadier:
	Inherits: ^Soldier
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
 	Inherits@anim: ^D2KPaletteRenderInfantry   
    Inherits@EXT: ^ExternalConditions
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 60
		Prerequisites: ~barracks.atreides, upgrade.barracks, high_tech_factory, ~techlevel.medium
		BuildDuration: 81 ## Wasn't converted, copied from Sardauker who has same value in TibEd.
		BuildDurationModifier: 40
		Description: Infantry armed with grenades. \n  Strong vs Buildings, Infantry\n  Weak vs Vehicles
        IconPalette: d2kunit           
	Valued:
		Cost: 120
	Tooltip:
		Name: Grenadier
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 8000
	Mobile:
		Speed: 43
	Armament:
		Weapon: d2k_grenade
		LocalOffset: 192,0,224
		FireDelay: 3
	TakeCover:
		ProneOffset: 96,100,-64
	WithInfantryBody:
		DefaultAttackSequence: throw
	Explodes:
		Weapon: GrenDeath
		EmptyWeapon: GrenDeath

sardaukar:
	Inherits: ^Soldier
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Inherits@anim: ^D2KPaletteRenderInfantry    
    Inherits@EXT: ^ExternalConditions
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 50
		Prerequisites: ~palace.sardaukar, ~techlevel.high
		BuildDuration: 81
		BuildDurationModifier: 40
		Description: Elite assault infantry of Corrino\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery
        IconPalette: d2kunit         
	Valued:
		Cost: 150
	Tooltip:
		Name: Sardaukar
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 18000
	Mobile:
		Speed: 31
	RevealsShroud:
		Range: 4c768
	WithInfantryBody:
		DefaultAttackSequence: shoot
	Armament@PRIMARY:
		Weapon: M_LMG
	Armament@SECONDARY:
		Weapon: M_HMG
	Voiced:
		VoiceSet: D2KGenericVoice
	Explodes:
		Weapon: SardDeath
		EmptyWeapon: SardDeath
		Chance: 100

mpsardaukar:
	Inherits: sardaukar
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 70
		Prerequisites: ~barracks.harkonnen, upgrade.barracks, high_tech_factory, ~techlevel.medium
		BuildDuration: 133
		Description: Elite assault infantry of Harkonnen\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery
	Valued:
		Cost: 200
	Armament@PRIMARY:
		Weapon: M_LMG_H
	Armament@SECONDARY:
		Weapon: M_HMG_H
	RenderSprites:
		Image: sardaukar

saboteur:
	Inherits: ^Soldier
	Inherits@anim: ^D2KPaletteRenderInfantry    
    Inherits@EXT: ^ExternalConditions
	Buildable:
		Queue: Infantry.d2k
		BuildPaletteOrder: 100
		Prerequisites: ~disabled
		Description: Sneaky infantry, armed with explosives\n  Strong vs Buildings\n  Weak vs Everything\n  Special Ability: destroy buildings
        IconPalette: d2kunit         
	Valued:
		Cost: 300 ## actually 0, but spawns from support power at Palace
	Tooltip:
		Name: Saboteur
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 15000
	Mobile:
		Speed: 43
	Demolition:
		DetonationDelay: 0
		Flashes: 0
		EnterBehaviour: Suicide
	-RevealOnFire:
	Cloak:
		InitialDelay: 85
		CloakDelay: 85
		CloakSound: STEALTH1.WAV
		UncloakOn: Attack, Unload, Infiltrate, Demolish, Move, Damage, Heal
		IsPlayerPalette: true
		PauseOnCondition: cloak-force-disabled
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	Voiced:
		VoiceSet: D2KSaboteurVoice
	-AttackFrontal:

nsfremen:
	Inherits: fremen
	Tooltip:
	Buildable:
		BuildPaletteOrder: 90
		Prerequisites: ~disabled
		Description: Elite infantry unit armed with assault rifles and rockets\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery
	RenderSprites:
		Image: fremen
	-Cloak:
	-GrantConditionOnDamageState@UNCLOAK:
    
d2k_mcv:
	Inherits: ^D2KTank
	Inherits@selection: ^SelectableSupportUnit
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Prerequisites: repair_pad, upgrade.heavy, ~techlevel.medium
		Queue: Armor.d2k
		BuildPaletteOrder: 110
		BuildDuration: 750
		BuildDurationModifier: 100
		Description: Deploys into another Construction Yard\n  Unarmed
        IconPalette: d2kunit            
	Valued:
		Cost: 2500
	Tooltip:
		Name: Mobile Construction Vehicle
	Selectable:
		Class: mcv
		DecorationBounds: 45, 32
	Health:
		HP: 75000
	Armor:
		Type: Heavy
	Mobile:
		Speed: 31
	RevealsShroud:
		Range: 2c768
	MustBeDestroyed:
		RequiredForShortGame: true
	BaseBuilding:
	Explodes:
		Weapon: UnitExplodeLarge
		EmptyWeapon: UnitExplodeLarge
	Transforms:
		IntoActor: construction_yard
		Offset: -1,-1
		TransformSounds: BUILD1.WAV
   		Facing: 64     
		NoTransformNotification: BuildingCannotPlaceAudio
	SpawnActorOnDeath:
		Actor: d2k_mcv.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	AttractsWorms:
		Intensity: 700
	ChangesHealth:
		Step: 50
		Delay: 3
		StartIfBelow: 50
	-RevealOnFire:

harvester:
	Inherits: ^D2KTank
    Inherits@harv: ^Harvester
	Inherits@selection: ^SelectableEconomicUnit
    Inherits@D2KSprite: ^D2KPaletteRender  
    Inherits@EXT: ^ExternalConditions
	Buildable:
		Queue: Armor.d2k
		Prerequisites: refinery
		BuildPaletteOrder: 10
		BuildDuration: 625
		BuildDurationModifier: 100
		Description: Collects Spice for processing\n  Unarmed
        IconPalette: d2kunit           
	Valued:
		Cost: 1000
	Tooltip:
		Name: Spice Harvester
	Selectable:
		Class: harvester
		DecorationBounds: 32, 32
	Harvester:
		Capacity: 28
		HarvestFacings: 8
		BaleUnloadDelay: 5
		SearchFromProcRadius: 30
		SearchFromHarvesterRadius: 15
	CarryableHarvester:
	Health:
		HP: 100000
	Armor:
		Type: Heavy
	Mobile:
		Speed: 43
	RevealsShroud:
		Range: 3c768
	Explodes:
		Weapon: UnitExplodeLarge
		EmptyWeapon: UnitExplodeLarge
	SpawnActorOnDeath:
		Actor: harvester.Husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	WithHarvestOverlay:
		Palette: effect50alpha
	WithDockingAnimation:
	AttractsWorms:
		Intensity: 700
	ChangesHealth:
		Step: 50
		Delay: 3
		StartIfBelow: 50
	-RevealOnFire:

trike:
	Inherits: ^Vehicle
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender      
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Queue: Vehicle.d2k
		BuildPaletteOrder: 10
		Prerequisites: ~light.trike
		BuildDuration: 225
		BuildDurationModifier: 100
		Description: Fast scout\n  Strong vs Infantry\n  Weak vs Tanks
        IconPalette: d2kunit          
	Valued:
		Cost: 400
	Tooltip:
		Name: Trike
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Selectable:
		Class: trike
	Health:
		HP: 25000
	Armor:
		Type: wood
	Mobile:
		TurnSpeed: 40
		Speed: 128
	RevealsShroud:
		Range: 4c768
	WithMuzzleOverlay:
	Armament@damage:
		Weapon: HMG
		LocalOffset: 180,0,110
	Armament@muzzle:
		Weapon: HMG_muzzle
		LocalOffset: -544,0,0
		MuzzleSequence: muzzle
	AttackFrontal:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	AttractsWorms:
		Intensity: 420

quad:
	Inherits: ^Vehicle
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender    
 	Inherits@EXT: ^ExternalConditions   
	Buildable:
		Queue: Vehicle.d2k
		Prerequisites: upgrade.light, ~techlevel.medium
		BuildPaletteOrder: 20
		BuildDuration: 321
		BuildDurationModifier: 100
		Description: Missile Scout\n  Strong vs Vehicles\n  Weak vs Infantry
        IconPalette: d2kunit          
	Valued:
		Cost: 600
	Tooltip:
		Name: Missile Quad
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 30000
	Armor:
		Type: Light
	Mobile:
		TurnSpeed: 32
		Speed: 96
	RevealsShroud:
		Range: 4c768
	Armament:
		Weapon: D2K_Rocket
		LocalOffset: 128,64,64, 128,-64,64
	AttackFrontal:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	Selectable:
		Class: quad
	AttractsWorms:
		Intensity: 470

siege_tank:
	Inherits: ^D2KTank
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender   
 	Inherits@EXT: ^ExternalConditions   
	Buildable:
		Queue: Armor.d2k
		Prerequisites: upgrade.heavy, ~techlevel.medium
		BuildPaletteOrder: 50
		BuildDuration: 375
		BuildDurationModifier: 100
		Description: Siege Artillery\n  Strong vs Infantry, Buildings\n  Weak vs Tanks
        IconPalette: d2kunit            
	Valued:
		Cost: 1200
	Tooltip:
		Name: Siege Tank
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 40000
	Armor:
		Type: Light
	Mobile:
		Speed: 43
		TurnSpeed: 12
	RevealsShroud:
		Range: 6c768
	Turreted:
		TurnSpeed: 12
		Offset: 0,0,-32
	Armament:
		Weapon: D2K_155mm
		Recoil: 150
		RecoilRecovery: 19
		LocalOffset: 512,0,320
		MuzzleSequence: muzzle
	AttackFrontal:
	WithMuzzleOverlay:
	WithSpriteTurret:
	Explodes:
		Weapon: UnitExplodeMed
		EmptyWeapon: UnitExplodeMed
	AutoTarget:
		InitialStanceAI: Defend
	Selectable:
		Class: siegetank
	SpawnActorOnDeath:
		Actor: siege_tank.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	AttractsWorms:
		Intensity: 600

missile_tank:
	Inherits: ^D2KTank
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetAllAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender   
 	Inherits@EXT: ^ExternalConditions   
	Tooltip:
		Name: Missile Tank
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Buildable:
		Queue: Armor.d2k
		Prerequisites: ~heavy.missile_tank, upgrade.heavy, research_centre, ~techlevel.high
		BuildPaletteOrder: 60
		BuildDuration: 512
		BuildDurationModifier: 100
		Description: Rocket Artillery\n  Strong vs Vehicles, Buildings, Aircraft\n  Weak vs Infantry
        IconPalette: d2kunit         
	Valued:
		Cost: 1400
	Mobile:
		Speed: 64
		TurnSpeed: 20
	Health:
		HP: 50000
	Armor:
		Type: Medium
	RevealsShroud:
		Range: 6c768
	Armament:
		Weapon: mtank_pri
		LocalOffset: -128,128,171, -128,-128,171
	AttackFrontal:
	AutoTarget:
		InitialStanceAI: Defend
	Explodes:
		Weapon: UnitExplodeMed
		EmptyWeapon: UnitExplodeMed
	Selectable:
		Class: missiletank
	SpawnActorOnDeath:
		Actor: missile_tank.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	AttractsWorms:
		Intensity: 600

sonic_tank:
	Inherits: ^Vehicle
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender   
 	Inherits@EXT: ^ExternalConditions   
	Buildable:
		Queue: Armor.d2k
		BuildPaletteOrder: 100
		Prerequisites: ~heavy.atreides, research_centre, ~techlevel.high
		BuildDuration: 562
		BuildDurationModifier: 100
		Description: Fires sonic shocks\n  Strong vs Infantry, Vehicles\n  Weak vs Artillery
        IconPalette: d2kunit           
	Valued:
		Cost: 1500
	Tooltip:
		Name: Sonic Tank
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 70000
	Armor:
		Type: Heavy
	Mobile:
		TurnSpeed: 12
		Speed: 31
	RevealsShroud:
		Range: 5c768
	Armament:
		Weapon: Sound
		LocalOffset: 600,0,427
	AttackFrontal:
	Explodes:
		Weapon: UnitExplodeLarge
		EmptyWeapon: UnitExplodeLarge
	SpawnActorOnDeath:
		Actor: sonic_tank.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	AttractsWorms:
		Intensity: 600

devastator:
	Inherits: ^D2KTank
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender    
 	Inherits@EXT: ^ExternalConditions   
	Buildable:
		Queue: Armor.d2k
		BuildPaletteOrder: 100
		Prerequisites: ~heavy.harkonnen, research_centre, ~techlevel.high
		BuildDuration: 625
		BuildDurationModifier: 100
		Description: Super Heavy Tank\n  Strong vs Tanks\n  Weak vs Artillery
        IconPalette: d2kunit            
	Valued:
		Cost: 1800
	Tooltip:
		Name: Devastator
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 100000
	Armor:
		Type: Heavy
	Mobile:
		TurnSpeed: 12
		Speed: 31
		Locomotor: heavywheeled
		RequiresCondition: !overload
		PauseOnCondition: notmobile
	AutoCarryable:
		RequiresCondition: !overload
	RevealsShroud:
		Range: 4c768
	Armament:
		Weapon: DevBullet
		LocalOffset: 640,0,32
		MuzzleSequence: muzzle
	AttackFrontal:
	WithMuzzleOverlay:
		IgnoreOffset: true
	Explodes:
		Weapon: UnitExplodeLarge
		EmptyWeapon: UnitExplodeLarge
		RequiresCondition: !overload
	SpawnActorOnDeath:
		Actor: devastator.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	Explodes@OVERLOAD:
		Weapon: PlasmaExplosion
		EmptyWeapon: PlasmaExplosion
		RequiresCondition: meltdown
	GrantConditionOnDeploy@REACTOR:
		DeployedCondition: overload
		PauseOnCondition: overload
	WithIdleOverlay@OVERLOAD:
		Sequence: active
		RequiresCondition: overload
	WithIdleOverlay@OVERLOAD2:
		Sequence: active-2
		RequiresCondition: overload
	KillsSelf@MELTDOWN:
		Delay: 240
		RequiresCondition: overload
		GrantsCondition: meltdown
	AttractsWorms:
		Intensity: 700
	ChangesHealth:
		Step: 50
		Delay: 3
		StartIfBelow: 50
	Selectable:
		DecorationBounds: 32, 32, 0, 0

raider:
	Inherits: ^Vehicle
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender    
 	Inherits@EXT: ^ExternalConditions   
	Buildable:
		Queue: Vehicle.d2k
		BuildPaletteOrder: 10
		Prerequisites: ~light.raider
		BuildDuration: 225
		BuildDurationModifier: 100
		Description: Improved Scout\n  Strong vs Infantry, Light Vehicles\n  Weak vs Tanks
        IconPalette: d2kunit            
	Valued:
		Cost: 500
	Tooltip:
		Name: Raider Trike
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 25000
	Armor:
		Type: Light
	Mobile:
		TurnSpeed: 40
		Speed: 149
	RevealsShroud:
		Range: 4c768
	WithMuzzleOverlay:
	Armament@damage:
		Weapon: HMGo
		LocalOffset: 170,0,0
	Armament@muzzle:
		Weapon: HMGo_muzzle
		LocalOffset: 170,0,0
		MuzzleSequence: muzzle
	AttackFrontal:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	AttractsWorms:
		Intensity: 420

stealth_raider:
	Inherits: raider
    Inherits@D2KSprite: ^D2KPaletteRender  
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Prerequisites: ~light.ordos, upgrade.light, high_tech_factory, ~techlevel.medium
		BuildPaletteOrder: 30
		BuildDuration: 225
		BuildDurationModifier: 100
		Description: Invisible Raider Trike\n  Strong vs Infantry, Light Vehicles\n  Weak vs Tanks
        IconPalette: d2kunit
	Valued:
		Cost: 600
	Tooltip:
		Name: Stealth Raider Trike
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Cloak:
		InitialDelay: 45
		CloakDelay: 90
		UncloakOn: Attack, Unload, Infiltrate, Demolish, Dock, Damage, Heal
		IsPlayerPalette: true
		PauseOnCondition: cloak-force-disabled
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	AutoTarget:
		InitialStance: HoldFire
		InitialStanceAI: ReturnFire
	-MustBeDestroyed:

deviator:
	Inherits: ^D2KTank
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender    
 	Inherits@EXT: ^ExternalConditions  
	Valued:
		Cost: 1500
	Tooltip:
		Name: Deviator
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Buildable:
		Queue: Armor.d2k
		BuildPaletteOrder: 50
		Prerequisites: ~heavy.ordos, research_centre, ~techlevel.high
		BuildDuration: 562
		BuildDurationModifier: 100
		Description: Fires a warhead which changes\nthe allegiance of enemy vehicles
        IconPalette: d2kunit
	Mobile:
		TurnSpeed: 12
		Speed: 53
	Health:
		HP: 65000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 4c768
	Armament:
		Weapon: DeviatorMissile
		LocalOffset: -299,0,85
	AttackFrontal:
	AutoTarget:
		InitialStanceAI: Defend
	Explodes:
		Weapon: UnitExplodeLarge
		EmptyWeapon: UnitExplodeLarge
	SpawnActorOnDeath:
		Actor: deviator.husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
	AttractsWorms:
		Intensity: 600

^combat_tank:
	Inherits: ^D2KTank
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
    Inherits@D2KSprite: ^D2KPaletteRender   
	Inherits@EXT: ^ExternalConditions    
	Buildable:
		Queue: Armor.d2k
		BuildPaletteOrder: 40
		BuildDuration: 432
		BuildDurationModifier: 100
		Description: Main Battle Tank\n  Strong vs Tanks\n  Weak vs Infantry
        IconPalette: d2kunit
	Valued:
		Cost: 800
	Tooltip:
		Name: Combat Tank
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Health:
		HP: 50000
	Armor:
		Type: Medium
	Mobile:
		Speed: 75
		TurnSpeed: 20
	RevealsShroud:
		Range: 5c768
	Turreted:
		TurnSpeed: 20
		RealignDelay: 0
	Armament:
		Weapon: 80mm_A
		Recoil: 128
		RecoilRecovery: 32
		LocalOffset: 256,0,0
		MuzzleSequence: muzzle
	AttackTurreted:
	WithMuzzleOverlay:
	WithSpriteTurret:
	Explodes:
		Weapon: UnitExplodeMed
		EmptyWeapon: UnitExplodeMed
	Selectable:
		Class: combat
	AttractsWorms:
		Intensity: 520
	SpawnActorOnDeath:
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true

combat_tank_a:
	Inherits: ^combat_tank
	Buildable:
		Prerequisites: ~heavy.atreides_combat
	Armament:
		Weapon: 80mm_A
	SpawnActorOnDeath:
		Actor: combat_tank_a.husk

combat_tank_h:
	Inherits: ^combat_tank
	Buildable:
		Prerequisites: ~heavy.harkonnen_combat
	Armament:
		Weapon: 80mm_H
	Mobile:
		Speed: 64
	Health:
		HP: 55000
	SpawnActorOnDeath:
		Actor: combat_tank_h.husk

combat_tank_o:
	Inherits: ^combat_tank
	Buildable:
		Prerequisites: ~heavy.ordos_combat
	Turreted:
		TurnSpeed: 20
	Armament:
		Weapon: 80mm_O
	Mobile:
		Speed: 85
	Health:
		HP: 45000
	SpawnActorOnDeath:
		Actor: combat_tank_o.husk

carryall.reinforce:
	Inherits: ^Plane
    Inherits@D2KSprite: ^D2KPaletteRender  
 	Inherits@EXT: ^ExternalConditions   
	Valued:
		Cost: 1100
	Tooltip:
		Name: Carryall
	Health:
		HP: 100000
	Armor:
		Type: Light
	Aircraft:
		CruiseAltitude: 2160
		CruisingCondition: cruising
		InitialFacing: 0
		Speed: 144
		TurnSpeed: 4
		LandableTerrainTypes: Sand, Rock, Transition, Spice, SpiceSand, Dune, Concrete
		Repulsable: False
		AirborneCondition: airborne
		CanSlide: True
		VTOL: true
		IdleTurnSpeed: 1
	Targetable@GROUND:
		TargetTypes: Ground, Vehicle
		RequiresCondition: !airborne
	Targetable@AIRBORNE:
		TargetTypes: Air
		RequiresCondition: airborne
	SpawnActorOnDeath@CRUISING:
		Actor: carryall.husk
		RequiresCondition: cruising
	SpawnActorOnDeath@LANDING:
		Actor: carryall.huskVTOL
		RequiresCondition: !cruising
	Carryall:
		BeforeLoadDelay: 10
		BeforeUnloadDelay: 15
		LocalOffset: 0, 0, -128
	RenderSprites:
		Image: carryall        
	SelfHealing:
		Step: 50
		Delay: 3
		HealIfBelow: 50
	Buildable:
		BuildDuration: 648
		BuildDurationModifier: 40
		Description: Large winged, planet-bound ship\n  Automatically lifts harvesters from and to Spice.\n  Lifts vehicles to Repair Pads when ordered.
        IconPalette: d2kunit
	HitShape:
		Type: Circle
			Radius: 256
    RejectsOrders:    
    Interactable:     
    
carryall:
	Inherits: carryall.reinforce
	-Carryall:
	AutoCarryall:
		BeforeLoadDelay: 10
		BeforeUnloadDelay: 15
		LocalOffset: 0, 0, -128
	Aircraft:
		MinAirborneAltitude: 400
	RevealsShroud@lifting_low:
		Range: 2c512
		Type: GroundPosition
		RequiresCondition: !airborne
	RevealsShroud@lifting_high:
		Range: 1c256
		Type: GroundPosition
		RequiresCondition: !cruising
	Buildable:
		Queue: Aircraft
		BuildPaletteOrder: 120

frigate:
	Inherits: ^Plane
	ParaDrop:
		DropRange: 1c0
	Interactable:
	Tooltip:
		Name: Frigate
	Aircraft:
		IdleBehavior: LeaveMap
		Speed: 189
		TurnSpeed: 1
		Repulsable: False
		MaximumPitch: 20
		CruiseAltitude: 2048
		VTOL: true
		CanHover: true
		CanSlide: true
	-AppearsOnRadar:
	Cargo:
		MaxWeight: 20
		PipCount: 10
	RejectsOrders:

ornithopter:
    Inherits@D2KSprite: ^D2KPaletteRender  
	Inherits@EXT: ^ExternalConditions
	Inherits: ^Plane
	AttackBomber:
	Armament:
		Weapon: OrniBomb
	Health:
		HP: 20000
	Armor:
		Type: Light
	Aircraft:
		Speed: 224
		TurnSpeed: 2
		Repulsable: False
		CruiseAltitude: 1920
	AmmoPool:
		Ammo: 5
	Tooltip:
		Name: Ornithopter
	SpawnActorOnDeath:
		Actor: ornithopter.husk
	RejectsOrders:
	RevealOnFire:
    HitShape:
		Type: Circle
			Radius: 256
	-MapEditorData:
    Interactable: 
    
ornithopter.husk:
	Inherits: ^PlaneHusk
	Tooltip:
		Name: Ornithopter
	Aircraft:
		TurnSpeed: 5
		Speed: 224
	RenderSprites:
		Image: ornithopter

carryall.husk:
	Inherits: ^PlaneHusk
	Tooltip:
		Name: Carryall
	Aircraft:
		TurnSpeed: 4
		Speed: 144
		CanSlide: True
		VTOL: true
	RenderSprites:
		Image: carryall

carryall.huskVTOL:
	Inherits: ^PlaneHusk
	Tooltip:
		Name: Carryall
	FallsToEarth:
		Moves: False
		Velocity: 0c128
	Aircraft:
		TurnSpeed: 4
		CanSlide: True
		VTOL: true
	RenderSprites:
		Image: carryall

###########################
#   UPGRADES
###########################

upgrade.conyard:
	AlwaysVisible:
	Interactable:
	ScriptTriggers:
	Tooltip:
		Name: Construction Yard Upgrade
	Buildable:
		BuildPaletteOrder: 50
		Prerequisites: construction_yard
		Queue: Upgrade.d2k
		BuildLimit: 1
		BuildDuration: 590
		BuildDurationModifier: 40
		Description: Unlocks additional construction options \n(Large Concrete Slab, Rocket Turret)
        IconPalette: d2kunit      
	Valued:
		Cost: 1000
	RenderSprites:
		Image: conyard.ordos
		FactionImages:
			atreides: conyard.atreides
			fremen: conyard.atreides
			harkonnen: conyard.harkonnen
			corrino: conyard.harkonnen
	ProvidesPrerequisite@upgradename:

upgrade.barracks:
	AlwaysVisible:
	Interactable:
	ScriptTriggers:
	Tooltip:
		Name: Barracks Upgrade
	Buildable:
		BuildPaletteOrder: 50
		Prerequisites: d2k_barracks
		Queue: Upgrade.d2k
		BuildLimit: 1
		BuildDuration: 290
		BuildDurationModifier: 40
		Description: Unlocks additional infantry \n(Trooper, Engineer, Thumper Infantry)    \n\nRequired to unlock faction specific infantry \n(Atreides: Grenadier, Harkonnen: Sardaukar)
        IconPalette: d2kunit     
	Valued:
		Cost: 500
	RenderSprites:
		Image: barracks.ordos
		FactionImages:
			atreides: barracks.atreides
			fremen: barracks.atreides
			harkonnen: barracks.harkonnen
			corrino: barracks.harkonnen
	ProvidesPrerequisite@upgradename:

upgrade.light:
	AlwaysVisible:
	Interactable:
	ScriptTriggers:
	Tooltip:
		Name: Light Factory Upgrade
	Buildable:
		BuildPaletteOrder: 50
		Prerequisites: light_factory
		Queue: Upgrade.d2k
		BuildLimit: 1
		BuildDuration: 215
		BuildDurationModifier: 40
		Description: Unlocks additional light unit \n(Missile Quad) \n\nRequired to unlock faction specific light unit \n(Ordos: Stealth Raider Trike)
        IconPalette: d2kunit
	Valued:
		Cost: 500
	RenderSprites:
		Image: light.ordos
		FactionImages:
			atreides: light.atreides
			fremen: light.atreides
			harkonnen: light.harkonnen
			corrino: light.harkonnen
	ProvidesPrerequisite@upgradename:

upgrade.heavy:
	AlwaysVisible:
	Interactable:
	ScriptTriggers:
	Tooltip:
		Name: Heavy Factory Upgrade
	Buildable:
		BuildPaletteOrder: 50
		Prerequisites: heavy_factory
		Queue: Upgrade.d2k
		BuildLimit: 1
		BuildDuration: 380
		BuildDurationModifier: 40
		Description: Unlocks additional construction options    \n(Repair Pad, IX Research Center) \n\nUnlocks additional heavy units \n(Siege Tank, Missile Tank, MCV)
        IconPalette: d2kunit
	Valued:
		Cost: 1000
	RenderSprites:
		Image: heavy.ordos
		FactionImages:
			atreides: heavy.atreides
			fremen: heavy.atreides
			harkonnen: heavy.harkonnen
			corrino: heavy.harkonnen
			mercenary: heavy.mercenary
	ProvidesPrerequisite@upgradename:

upgrade.hightech:
	AlwaysVisible:
	Interactable:
	ScriptTriggers:
	Tooltip:
		Name: High Tech Factory Upgrade
	Buildable:
		BuildPaletteOrder: 50
		Prerequisites: ~hightech.atreides, ~techlevel.superweapons
		Queue: Upgrade.d2k
		BuildLimit: 1
		BuildDuration: 720
		BuildDurationModifier: 40
		Description: Unlocks the Atreides Air Strike superweapon
        IconPalette: d2kunit
	Valued:
		Cost: 2000
	RenderSprites:
		Image: hightech.atreides
	ProvidesPrerequisite@upgradename:

#####################################
#       EDITOR STUFF
#####################################

wormspawner:
	Interactable:
	EditorOnlyTooltip:
		Name: (worm spawning location)
	AlwaysVisible:
	Immobile:
		OccupiesSpace: false
	RenderSpritesEditorOnly:
	WithSpriteBody:
	BodyOrientation:
		QuantizedFacings: 1
	ActorSpawner:
	MapEditorData:
		Categories: System


#######################################
#       HUSKS
#######################################

d2k_mcv.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Health:
		HP: 1750
	Tooltip:
		Name: Mobile Construction Vehicle (Destroyed)
    TransformOnCapture:
        IntoActor: d2k_mcv

harvester.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Health:
		HP: 1500
	Tooltip:
		Name: Spice Harvester (Destroyed)
	TransformOnCapture:
		IntoActor: harvester

siege_tank.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Tooltip:
		Name: Siege Tank (Destroyed)
	ThrowsParticle@turret:
		Anim: turret
	TransformOnCapture:
		IntoActor: siege_tank

missile_tank.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Tooltip:
		Name: Missile Tank (Destroyed)
	TransformOnCapture:
		IntoActor: missile_tank

sonic_tank.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Tooltip:
		Name: Sonic Tank (Destroyed)
	TransformOnCapture:
		IntoActor: sonic_tank

devastator.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Health:
		HP: 1250
	Tooltip:
		Name: Devastator (Destroyed)
	TransformOnCapture:
		IntoActor: devastator

deviator.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Tooltip:
		Name: Deviator (Destroyed)
	TransformOnCapture:
		IntoActor: deviator

^combat_tank.husk:
    Inherits@D2KSprite: ^D2KPaletteRender
	Inherits: ^Husk
	Health:
		HP: 1000
	Tooltip:
		Name: Combat Tank (Destroyed)
	ThrowsParticle@turret:
		Anim: turret

combat_tank_a.husk:
	Inherits: ^combat_tank.husk
	TransformOnCapture:
		IntoActor: combat_tank_a

combat_tank_h.husk:
	Inherits: ^combat_tank.husk
	TransformOnCapture:
		IntoActor: combat_tank_h

combat_tank_o.husk:
	Inherits: ^combat_tank.husk
	TransformOnCapture:
		IntoActor: combat_tank_o
